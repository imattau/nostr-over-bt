services:
  relay:
    build: 
      context: ../../
      dockerfile: apps/relay/Dockerfile
    ports:
      - "127.0.0.1:8090:8080" # Relay WebSocket
      - "127.0.0.1:8091:8081" # BT Tracker (Optional)
    environment:
      - REDIS_URL=redis://redis:6379
      - DB_PATH=/data/relay.db
    volumes:
      - relay-data:/data
    depends_on:
      - redis

  redis:
    image: redis:7-alpine
    expose:
      - "6379"

volumes:
  relay-data:
